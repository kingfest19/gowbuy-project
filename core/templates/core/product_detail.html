{# In your product_detail.html, where you want to display the 3D model #}

{% if product.three_d_model_url %}
    <div class="product-3d-viewer my-4 p-3 border rounded shadow-sm">
        <h4 class="mb-3">{% translate "Interactive 3D View" %}</h4>

        {# Import the <model-viewer> component - place this in your base template's <head> or before the </body> for better performance if used on multiple pages #}
        <script type.module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>

        <model-viewer
            src="{{ product.three_d_model_url }}"
            alt="A 3D model of {{ product.name }}"
            auto-rotate
            camera-controls
            ar {# Enables AR mode on supported devices #}
            ar-modes="webxr scene-viewer quick-look" {# AR modes #}
            shadow-intensity="1"
            environment-image="neutral" {# Or path to an HDR environment image #}
            exposure="1"
            style="width: 100%; height: 450px; background-color: #f8f9fa; border-radius: 8px;"
        >
            {# Optional: Progress bar for loading the model #}
            <div class="progress-bar hide" slot="progress-bar">
                <div class="update-bar"></div>
            </div>
            {# Optional: Custom AR button #}
            <button slot="ar-button" id="ar-button" class="btn btn-outline-primary mt-2">
                {% translate "View in your space" %}
            </button>
        </model-viewer>
        <p class="text-muted small mt-2">{% translate "Click and drag to rotate. Scroll to zoom. Try AR on compatible devices!" %}</p>
    </div>

    {# Basic styling for the progress bar (optional) #}
    <style>
        .progress-bar {
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background-color: rgba(255, 255, 255, 0.8);
            transition: opacity 0.3s;
            pointer-events: none; /* Allow interaction with underlying controls */
        }
        .progress-bar.hide {
            opacity: 0;
        }
        .update-bar {
            background-color: #007bff; /* Bootstrap primary color */
            width: 0%;
            height: 5px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s;
        }
        #ar-button {
            position: absolute;
            bottom: 16px;
            right: 16px;
        }
    </style>
{% endif %}