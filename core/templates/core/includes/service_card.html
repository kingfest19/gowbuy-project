{% load static i18n humanize %}

<div class="col">
    <div class="card h-100 service-card shadow-sm">
        <a href="{% url 'core:service_detail' service_slug=service.slug %}" class="text-decoration-none">
            {% if service.images.first %}
                <img src="{{ service.images.first.image.url }}" class="card-img-top" alt="{{ service.title }}" style="height: 180px; object-fit: cover;">
            {% else %}
                <img src="{% static 'assets/service-header.png' %}" class="card-img-top" alt="{% trans 'Service Placeholder' %}" style="height: 180px; object-fit: cover; background-color: #f0f0f0;">
            {% endif %}
        </a>
        <div class="card-body d-flex flex-column">
            <h5 class="card-title fs-6 mb-1">
                <a href="{% url 'core:service_detail' service_slug=service.slug %}" class="text-dark text-decoration-none stretched-link">{{ service.title|truncatechars:50 }}</a>
            </h5>
            <small class="text-muted mb-2">
                <i class="fas fa-user-tie me-1"></i>
                 <a href="{% url 'core:provider_profile_detail' username=service.provider.username %}" class="text-muted text-decoration-none small">
            </small>
           
            <p class="card-text small text-muted flex-grow-1">{{ service.description|truncatewords:15 }}</p>
            
            {% with cheapest_package=service.packages.all|dictsort:"price"|first %}
                {% if cheapest_package %}
                    <p class="card-text fw-bold mb-0">{% trans "From" %} GH₵ {{ cheapest_package.price|floatformat:2|intcomma }}</p>
                {% elif service.price %}
                     <p class="card-text fw-bold mb-0">GH₵ {{ service.price|floatformat:2|intcomma }}</p>
                {% else %}
                    <p class="card-text text-muted mb-0">{% trans "Contact for Price" %}</p>
                {% endif %}
            {% endwith %}
        </div>
    </div>
</div>