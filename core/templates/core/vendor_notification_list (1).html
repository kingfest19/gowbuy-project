{% extends "base.html" %}
{% load static i18n humanize %}

{% block title %}{{ page_title }} | {% trans "NEXUS" %}{% endblock %}

{% block extra_css %}
    {{ block.super }} {# Keep any CSS from the parent template #}
    <style>
        /* Custom styles for Vendor Notification List */
        .notification-list-container {
            background-color: #ffffff; /* White background for the main content area */
            padding: 30px; /* More padding */
            border-radius: 12px; /* More rounded corners */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); /* Stronger, softer shadow */
            border: 1px solid #e0e0e0; /* Lighter border */
        }

        .notification-list-container h2 {
            color: #333; /* Darker title color */
            margin-bottom: 25px;
            text-align: center; /* Center the title */
        }

        .notification-item {
            border: none; /* Remove default list-group-item border */
            border-bottom: 1px solid #eee; /* Add a subtle bottom border */
            padding: 15px 20px; /* Adjust padding */
            transition: background-color 0.2s ease-in-out; /* Smooth hover transition */
        }

        .notification-item:last-child {
            border-bottom: none; /* No border on the last item */
        }

        .notification-item:hover {
            background-color: #f8f9fa; /* Light background on hover */
        }

        .notification-item.fw-bold {
            background-color: #e9f5ff; /* Light blue background for unread */
        }

        /* Style for the empty state illustration */
        .empty-state-illustration { max-width: 200px; height: auto; margin-bottom: 20px; }

        /* Animation for notifications needing attention */
        @keyframes popEffect {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.03); /* Slightly larger */
                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1), 0 3px 6px rgba(0,0,0,0.08); /* Subtle pop shadow */
            }
        }
        .needs-attention-animation.fw-bold { /* Apply only to unread items that need attention */
            animation: popEffect 1.8s infinite ease-in-out;
        }
    </style>
{% endblock extra_css %}
{% block content %}
<div class="container mt-5 mb-5">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <h2 class="mb-4">{{ page_title }}</h2>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="notification-list-container"> {# Wrap content in the new styled container #}
                <h2 class="mb-4">{{ page_title }}</h2> {# Move title inside the container #}

                {% if notifications %}
                <div class="list-group"> {# Remove shadow-sm here, added to container #}
                    {% for notification in notifications %}
                        <div class="list-group-item list-group-item-action flex-column align-items-start notification-item
                                    {% if not notification.is_read %}fw-bold{% endif %}
                                    {% if not notification.is_read and "accepted the task" in notification.message|lower %}
                                        needs-attention-animation
                                    {% endif %}">
                            <div class="d-flex w-100 justify-content-between">
                                <p class="mb-1">
                                    {% if not notification.is_read %}✨{% else %}✉️{% endif %} {# Emoji based on read status #}
                                    {% if notification.link %}
                                        <a href="{{ notification.link }}" class="text-decoration-none stretched-link">{{ notification.message|linebreaksbr }}</a>
                                    {% else %}
                                        {{ notification.message|linebreaksbr }}
                                    {% endif %}
                                </p>
                                <small class="text-muted text-end" style="min-width: 80px;">{{ notification.created_at|naturaltime }}</small> {# Ensure time doesn't wrap too tightly #}
                            </div>
                            {# You could add more details here if your Notification model has them, e.g., notification_type #}
                        </div>
                    {% endfor %}
                </div>

                <div class="mt-4"> {# Pagination outside the list-group but inside the container #}
                    {% include 'partials/_pagination.html' %} {# page_obj is already in context from ListView #}
                </div>

            {% else %}
                <div class="text-center text-muted py-5"> {# Center and add padding to empty state #}
                    {# Placeholder for a simple SVG illustration - replace with your actual SVG path #}
                    <img src="{% static 'path/to/your/no_notifications_illustration.svg' %}" alt="No Notifications" class="empty-state-illustration"> {# TODO: Replace with actual SVG path #}
                    {% trans "You have no notifications at the moment." %}
                </div>
            {% endif %}
            </div> {# Close notification-list-container #}

            <a href="{% url 'core:vendor_dashboard' %}" class="btn btn-outline-secondary mt-4">{% trans "Back to Dashboard" %}</a>
        </div>
    </div>
</div>
{% endblock content %}