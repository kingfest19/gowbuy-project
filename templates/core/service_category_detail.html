{% extends "core/service_base.html" %} {# Or extend "base.html" if service_base doesn't exist #}
{% load static i18n %}

{% block title %}{{ category.name }} - {% trans "Services" %} - {{ block.super }}{% endblock %}

{% block service_content %} {# Or use block content if extending base.html #}
<div class="container mt-4 mb-5">

    {# Breadcrumbs (Optional) #}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'core:home' %}">{% trans "Home" %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'core:service_list' %}">{% trans "Services" %}</a></li>
            {# Add parent category links if needed #}
            <li class="breadcrumb-item active" aria-current="page">{{ category.name }}</li>
        </ol>
    </nav>

    <h1 class="mb-4">{{ category.name }}</h1>

    {% if category.description %}
        <p class="lead text-muted mb-4">{{ category.description }}</p>
    {% endif %}

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for service in services %}
            <div class="col">
                <div class="card h-100 shadow-sm">
                    {% if service.images.first %}
                        <img src="{{ service.images.first.image.url }}" class="card-img-top" alt="{{ service.title }}" style="height: 200px; object-fit: cover;">
                    {% else %}
                        <img src="{% static 'assets/img/placeholder.png' %}" class="card-img-top" alt="Placeholder" style="height: 200px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{ service.title }}</h5>
                        <p class="card-text text-muted small">{% trans "By" %} {{ service.provider.username }}</p>
                        {# Display starting price if packages exist #}
                        {% with first_package=service.packages.all.first %}
                            {% if first_package %}
                                <p class="card-text fw-bold">{% trans "Starting from" %} GHâ‚µ{{ first_package.price|floatformat:2 }}</p>
                            {% endif %}
                        {% endwith %}
                        <a href="{{ service.get_absolute_url }}" class="btn btn-primary mt-auto">{% trans "View Details" %}</a>
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-12">
                <p class="text-center text-muted">{% trans "No services found in this category yet." %}</p>
            </div>
        {% endfor %}
    </div>

</div>
{% endblock service_content %}